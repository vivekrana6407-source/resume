<!DOCTYPE html>
<html>
  <head>
    <title>Hello, World!</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
      <h1 class="title">Hello World! </h1>
      <p id="currentTime"></p>
      <script src="script.js"></script>
  </body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivek Rana | Interactive Resume</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.1/marked.min.js"></script>
    <!-- Chosen Palette: Slate & Sky -->
    <!-- Application Structure Plan: A single-page application with a fixed sidebar (desktop) and mobile menu for navigation. 
         Includes Home, Skills, Training, Contact, and a NEW 'AI Creative Studio' section. 
         The AI section demonstrates API integration capabilities, featuring a specialized Chatbot representing the candidate 
         and an Image Generation tool for creative concepts. -->
    <!-- Visualization & Content Choices: 
        - Chat Interface: Standard chat UI with user/bot message bubbles -> Goal: Interactive Q&A about the candidate.
        - Image Gen: Input field + Image display container -> Goal: Showcasing creative AI usage.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (max-width: 640px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-item {
            cursor: pointer;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease-in-out;
            font-weight: 500;
        }
        .nav-item:hover {
            background-color: #374151; 
        }
        .nav-active {
            background-color: #0ea5e9; 
            color: white;
            font-weight: 700;
        }
        .nav-active:hover {
            background-color: #0284c7;
        }
        .page-section {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .btn-filter {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            background-color: #e2e8f0;
            color: #1e293b;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
        }
        .btn-filter:hover {
            background-color: #cbd5e1;
        }
        .btn-filter-active {
            background-color: #0ea5e9;
            color: white;
        }
        .btn-filter-active:hover {
            background-color: #0284c7;
        }
        /* Chat UI Styling */
        .chat-bubble {
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 80%;
            margin-bottom: 10px;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        .chat-user {
            background-color: #0ea5e9;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 2px;
        }
        .chat-bot {
            background-color: #f1f5f9;
            color: #334155;
            align-self: flex-start;
            border-bottom-left-radius: 2px;
            border: 1px solid #e2e8f0;
        }
        .typing-indicator span {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #94a3b8;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out both;
            margin: 0 1px;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div class="flex">
        
        <button id="mobile-menu-button" class="fixed top-4 left-4 z-20 p-2 bg-gray-900 text-white rounded-md md:hidden">
            <span id="menu-icon-open">&#9776;</span> 
            <span id="menu-icon-close" class="hidden">&times;</span> 
        </button>

        <nav id="sidebar" class="hidden md:flex flex-col w-64 bg-gray-900 text-slate-200 h-screen fixed top-0 left-0 z-10 p-6 shadow-lg overflow-y-auto">
            <h1 class="text-2xl font-bold text-white mb-8 mt-12 md:mt-0">VIVEK RANA</h1>
            <ul class="space-y-3">
                <li><span class="nav-item nav-active" data-page="home">Home</span></li>
                <li><span class="nav-item" data-page="skills">Skills Dashboard</span></li>
                <li><span class="nav-item" data-page="training">Training & Education</span></li>
                <li><span class="nav-item" data-page="contact">Contact</span></li>
                <!-- New AI Section Link -->
                <li><span class="nav-item text-sky-400 font-bold hover:text-sky-300" data-page="ai-studio">AI Creative Studio âœ¨</span></li>
            </ul>
            <div class="mt-auto text-xs text-slate-400 pt-6">
                <p>&copy; 2025 Vivek Rana. </p>
                <p>Interactive Resume</p>
            </div>
        </nav>

        <main class="md:ml-64 p-6 md:p-10 w-full min-h-screen">
            
            <section id="page-home" class="page-section bg-white p-8 rounded-lg shadow-md">
                <h2 class="text-4xl md:text-5xl font-extrabold text-slate-900">VIVEK RANA</h2>
                <h3 class="text-2xl md:text-3xl font-bold text-sky-500 mt-1">Graphic Designer & Video Editor (Fresher)</h3>
                
                <div class="w-20 h-1 bg-sky-500 rounded-full my-6"></div>

                <h4 class="text-xl font-bold mb-3">PROFILE SUMMARY</h4>
                <p class="text-base md:text-lg text-slate-700 leading-relaxed">
                    Highly motivated and technically skilled fresher with 9 months of comprehensive certified training in graphic design and video editing. Proficient in the Adobe Creative Suite (Photoshop, Premiere Pro, After Effects) and CorelDRAW, focused on creating visually compelling content for digital and print media. Eager to contribute foundational skills to a dynamic team environment.
                </p>
                <div class="mt-8 p-4 bg-sky-50 border border-sky-100 rounded-lg">
                    <p class="text-sky-800 font-medium text-sm">âœ¨ New Feature: Check out the <a href="#" onclick="document.querySelector('[data-page=ai-studio]').click()" class="underline hover:text-sky-600 font-bold">AI Creative Studio</a> to chat with my virtual assistant or generate design concepts!</p>
                </div>
            </section>

            <section id="page-skills" class="page-section hidden bg-white p-8 rounded-lg shadow-md">
                <h2 class="text-3xl font-extrabold text-slate-900 mb-3">Skills Dashboard</h2>
                <p class="text-slate-700 mb-6">
                    This dashboard provides a visual representation of my technical proficiencies. My 9-month certification provided a strong foundation across multiple creative domains. Click the buttons to filter the skills chart.
                </p>
                
                <div class="flex flex-wrap gap-3 mb-6">
                    <button class="btn-filter btn-filter-active" id="btn-skills-all">All Skills</button>
                    <button class="btn-filter" id="btn-skills-design">Graphic Design</button>
                    <button class="btn-filter" id="btn-skills-video">Video Editing</button>
                    <button class="btn-filter" id="btn-skills-general">General Software</button>
                </div>

                <div class="chart-container">
                    <canvas id="skillsChart"></canvas>
                </div>
            </section>

            <section id="page-training" class="page-section hidden bg-white p-8 rounded-lg shadow-md">
                <h2 class="text-3xl font-extrabold text-slate-900 mb-6">Training & Education</h2>
                <p class="text-slate-700 mb-8">
                    My professional and academic qualifications have built a strong foundation for a career in creative media. My core expertise comes from intensive, project-based professional training, supported by a formal academic background.
                </p>

                <div class="relative pl-8 border-l-4 border-sky-500 space-y-12">
                    
                    <div class="absolute w-4 h-4 bg-sky-500 rounded-full -left-2.5 top-2"></div>
                    <div>
                        <span class="absolute -left-3.5 -top-1 text-3xl">&#127891;</span> 
                        <h3 class="text-xl font-bold text-slate-900">9-Month Professional Certification (Techpixel)</h3>
                        <p class="text-md font-semibold text-sky-600">Focus: Comprehensive Graphic Design & Video Editing</p>
                        <div class="mt-4 text-slate-700 space-y-2">
                            <p><strong>&#10004; Design Fundamentals:</strong> Mastery of core principles including composition, color theory, and advanced typography.</p>
                            <p><strong>&#10004; Digital Media Production:</strong> Hands-on experience in video post-production (Premiere Pro) and creating animations/visual effects (After Effects).</p>
                            <p><strong>&#10004; Practical Application:</strong> Trained in generating professional assets such as logos, social media visuals, print flyers, and short marketing videos.</p>
                        </div>
                    </div>

                    <div class="absolute w-4 h-4 bg-gray-400 rounded-full -left-2.5"></div>
                    <div>
                        <span class="absolute -left-3.5 -top-1 text-3xl">&#127890;</span>
                        <h3 class="text-xl font-bold text-slate-900">Bachelor of Commerce (B.Com)</h3>
                        <p class="text-md font-semibold text-slate-600">Sri Dev Suman, Rishikesh Campus</p>
                        <p class="text-sm text-slate-500">2025 - Present (Expected 2028)</p>
                    </div>

                    <div class="absolute w-4 h-4 bg-gray-400 rounded-full -left-2.5"></div>
                    <div>
                        <h3 class="text-xl font-bold text-slate-900">Intermediate (10+2)</h3>
                        <p class="text-md font-semibold text-slate-600">Government Inter College, Raiwala</p>
                        <p class="text-sm text-slate-500">Year of Completion: 2025</p>
                    </div>

                    <div class="absolute w-4 h-4 bg-gray-400 rounded-full -left-2.5"></div>
                    <div>
                        <h3 class="text-xl font-bold text-slate-900">High School (10th)</h3>
                        <p class="text-md font-semibold text-slate-600">Government Inter College, Raiwala</p>
                        <p class="text-sm text-slate-500">Year of Completion: 2023</p>
                    </div>

                </div>
            </section>

            <section id="page-contact" class="page-section hidden bg-white p-8 rounded-lg shadow-md">
                <h2 class="text-3xl font-extrabold text-slate-900 mb-6">Get In Touch</h2>
                <p class="text-slate-700 mb-8">
                    I am actively seeking new opportunities and would be happy to discuss how my skills can benefit your team. Please feel free to reach out.
                </p>

                <ul class="space-y-4">
                    <li class="flex items-center text-lg">
                        <span class="text-2xl mr-4 text-sky-500">&#128231;</span>
                        <a href="mailto:vivekrana0116@gmail.com" class="text-slate-700 hover:text-sky-600 hover:underline">vivekrana0116@gmail.com</a>
                    </li>
                    <li class="flex items-center text-lg">
                        <span class="text-2xl mr-4 text-sky-500">&#128241;</span>
                        <a href="tel:+919897848511" class="text-slate-700 hover:text-sky-600 hover:underline">+91 98978 48511</a>
                    </li>
                    <li class="flex items-center text-lg">
                        <span class="text-2xl mr-4 text-sky-500">&#127968;</span>
                        <span class="text-slate-700">Vadik Nagar 2, Raiwala, Uttarakhand</span>
                    </li>
                </ul>
            </section>

            <!-- NEW AI STUDIO SECTION -->
            <section id="page-ai-studio" class="page-section hidden bg-white p-8 rounded-lg shadow-md">
                <h2 class="text-3xl font-extrabold text-slate-900 mb-2">AI Creative Studio âœ¨</h2>
                <p class="text-slate-700 mb-8">
                    Powered by Google's Gemini models. Experience how I integrate emerging technology into my creative workflow.
                </p>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Chatbot Feature -->
                    <div class="border border-slate-200 rounded-xl p-4 flex flex-col h-[500px] shadow-sm">
                        <div class="flex items-center mb-4 pb-2 border-b border-slate-100">
                            <div class="w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"></div>
                            <h3 class="font-bold text-lg text-slate-800">Ask Vivek (AI Agent)</h3>
                        </div>
                        
                        <div id="chat-history" class="flex-1 overflow-y-auto mb-4 flex flex-col p-2 bg-white scroll-smooth">
                            <div class="chat-bubble chat-bot">
                                Hello! I'm Vivek's AI assistant. Ask me anything about his design skills, video editing experience, or training!
                            </div>
                        </div>

                        <div class="relative">
                            <form id="chat-form" class="flex gap-2">
                                <input type="text" id="chat-input" placeholder="e.g., Do you know After Effects?" class="flex-1 p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500">
                                <button type="submit" class="bg-sky-500 hover:bg-sky-600 text-white px-4 py-2 rounded-lg font-bold transition-colors">
                                    Send
                                </button>
                            </form>
                            <div id="chat-error" class="text-red-500 text-xs mt-1 hidden">Error connecting. Please try again.</div>
                        </div>
                    </div>

                    <!-- Image Generation Feature -->
                    <div class="border border-slate-200 rounded-xl p-4 flex flex-col h-auto lg:h-[500px] shadow-sm">
                         <div class="flex items-center mb-4 pb-2 border-b border-slate-100">
                            <span class="text-lg mr-2">ðŸŽ¨</span>
                            <h3 class="font-bold text-lg text-slate-800">Concept Generator</h3>
                        </div>
                        <p class="text-sm text-slate-600 mb-4">
                            Describe a design concept (logo, poster, scene) and I'll generate a draft using the <strong>Imagen 3</strong> model.
                        </p>
                        
                        <div class="flex gap-2 mb-4">
                            <input type="text" id="image-prompt" placeholder="e.g., A minimalist logo for a coffee shop, vector style" class="flex-1 p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <button id="btn-generate-image" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap">
                                Generate âœ¨
                            </button>
                        </div>

                        <div id="image-result-container" class="flex-1 bg-slate-50 rounded-lg flex items-center justify-center border-2 border-dashed border-slate-200 relative overflow-hidden min-h-[300px]">
                            <p id="image-placeholder-text" class="text-slate-400 text-center px-4">Generated concept will appear here.</p>
                            <div id="image-loader" class="hidden flex flex-col items-center">
                                <div class="w-8 h-8 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mb-2"></div>
                                <span class="text-purple-600 text-sm font-medium">Creating art...</span>
                            </div>
                            <img id="generated-image" class="hidden w-full h-full object-contain" alt="Generated concept">
                        </div>
                        <div id="image-error" class="text-red-500 text-xs mt-2 hidden text-center"></div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Resume Data for Charts ---
            const skillsData = {
                graphicDesign: { "CorelDRAW": 9, "Photoshop": 8, "Typography": 7, "Color Theory": 7, "Layout Design": 8, "Print Media": 7 },
                videoEditing: { "Premiere Pro": 8, "After Effects": 7, "Trimming & Splicing": 8, "Transitions": 7, "Audio Syncing": 7, "Motion Graphics": 6 },
                general: { "MS Word": 6, "MS PowerPoint": 6, "Creativity": 8, "Problem Solving": 7 }
            };
            const allSkills = { ...skillsData.graphicDesign, ...skillsData.videoEditing, ...skillsData.general };

            // --- Navigation Logic ---
            const navLinks = document.querySelectorAll('.nav-item');
            const pages = document.querySelectorAll('.page-section');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const sidebar = document.getElementById('sidebar');
            const menuIconOpen = document.getElementById('menu-icon-open');
            const menuIconClose = document.getElementById('menu-icon-close');

            function showPage(pageName) {
                pages.forEach(page => {
                    page.id === 'page-' + pageName ? page.classList.remove('hidden') : page.classList.add('hidden');
                });
                navLinks.forEach(link => {
                    link.dataset.page === pageName ? link.classList.add('nav-active') : link.classList.remove('nav-active');
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const pageName = link.dataset.page;
                    showPage(pageName);
                    if (window.innerWidth < 768) {
                        sidebar.classList.add('hidden');
                        menuIconOpen.classList.remove('hidden');
                        menuIconClose.classList.add('hidden');
                    }
                });
            });

            mobileMenuButton.addEventListener('click', () => {
                sidebar.classList.toggle('hidden');
                menuIconOpen.classList.toggle('hidden');
                menuIconClose.classList.toggle('hidden');
            });

            // --- Chart.js Logic ---
            let skillsChart;
            const ctx = document.getElementById('skillsChart');
            if (ctx) {
                skillsChart = new Chart(ctx.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: Object.keys(allSkills),
                        datasets: [{
                            label: 'Proficiency Level',
                            data: Object.values(allSkills),
                            backgroundColor: 'rgba(14, 165, 233, 0.2)',
                            borderColor: 'rgba(14, 165, 233, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(14, 165, 233, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(14, 165, 233, 1)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scale: {
                            ticks: { beginAtZero: true, max: 10, stepSize: 2, backdropColor: 'rgba(0, 0, 0, 0)' },
                            pointLabels: { color: '#1e293b', font: { size: 13, weight: 500 } },
                            grid: { color: '#e2e8f0' }
                        }
                    }
                });
            }

            // --- Filter Buttons Logic ---
            const filterButtons = document.querySelectorAll('.btn-filter');
            filterButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterButtons.forEach(b => b.classList.remove('btn-filter-active'));
                    btn.classList.add('btn-filter-active');
                    
                    let newData;
                    if(btn.id === 'btn-skills-all') newData = allSkills;
                    else if(btn.id === 'btn-skills-design') newData = skillsData.graphicDesign;
                    else if(btn.id === 'btn-skills-video') newData = skillsData.videoEditing;
                    else if(btn.id === 'btn-skills-general') newData = skillsData.general;

                    if (skillsChart) {
                        skillsChart.data.labels = Object.keys(newData);
                        skillsChart.data.datasets[0].data = Object.values(newData);
                        skillsChart.update();
                    }
                });
            });


            // ==========================================
            // AI INTEGRATION LOGIC
            // ==========================================
            const apiKey = ""; // API Key injected at runtime

            // 1. CHATBOT LOGIC
            const chatForm = document.getElementById('chat-form');
            const chatInput = document.getElementById('chat-input');
            const chatHistory = document.getElementById('chat-history');
            const chatError = document.getElementById('chat-error');

            const systemPrompt = `
                You are Vivek Rana, an enthusiastic Graphic Designer & Video Editor (Fresher) seeking a job. 
                You have 9 months of certified training from Techpixel in CorelDRAW, Photoshop, Premiere Pro, and After Effects.
                You have a B.Com degree (in progress, expected 2028) from Sri Dev Suman, Rishikesh Campus.
                You completed Intermediate (10+2) in 2025 and High School in 2023 at Government Inter College, Raiwala.
                You live in Vadik Nagar 2, Raiwala, Uttarakhand.
                Your skills include Typography, Color Theory, Layout Design, Video Trimming, Audio Syncing, and Basic Motion Graphics.
                Answer questions about your skills, background, and training professionally and confidently. 
                If asked about something not in your background, politely mention you are a quick learner and eager to acquire new skills.
                Keep answers concise (under 50 words) and friendly.
            `;

            async function callGeminiChat(userMessage) {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{ role: "user", parts: [{ text: userMessage }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] }
                };

                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text || "I'm having trouble thinking right now.";
                } catch (error) {
                    console.error("Chat Error:", error);
                    throw error;
                }
            }

            function addMessage(text, isUser) {
                const div = document.createElement('div');
                div.className = `chat-bubble ${isUser ? 'chat-user' : 'chat-bot'}`;
                // Parse simple markdown for bot
                div.innerHTML = isUser ? text : marked.parse(text); 
                chatHistory.appendChild(div);
                chatHistory.scrollTop = chatHistory.scrollHeight;
            }

            function addTypingIndicator() {
                const div = document.createElement('div');
                div.id = 'typing-indicator';
                div.className = 'chat-bubble chat-bot typing-indicator';
                div.innerHTML = '<span></span><span></span><span></span>';
                chatHistory.appendChild(div);
                chatHistory.scrollTop = chatHistory.scrollHeight;
            }

            function removeTypingIndicator() {
                const el = document.getElementById('typing-indicator');
                if (el) el.remove();
            }

            chatForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const text = chatInput.value.trim();
                if (!text) return;

                chatInput.value = '';
                chatError.classList.add('hidden');
                addMessage(text, true);
                addTypingIndicator();

                // Exponential backoff logic
                const delays = [1000, 2000, 4000, 8000, 16000];
                let success = false;

                for (let i = 0; i < delays.length; i++) {
                    try {
                        const reply = await callGeminiChat(text);
                        removeTypingIndicator();
                        addMessage(reply, false);
                        success = true;
                        break;
                    } catch (err) {
                        if (i === delays.length - 1) {
                            removeTypingIndicator();
                            chatError.textContent = "Connection failed. Please try again later.";
                            chatError.classList.remove('hidden');
                        } else {
                            await new Promise(r => setTimeout(r, delays[i]));
                        }
                    }
                }
            });

            // 2. IMAGE GENERATION LOGIC
            const imagePromptInput = document.getElementById('image-prompt');
            const generateBtn = document.getElementById('btn-generate-image');
            const imageLoader = document.getElementById('image-loader');
            const generatedImage = document.getElementById('generated-image');
            const imagePlaceholderText = document.getElementById('image-placeholder-text');
            const imageError = document.getElementById('image-error');

            async function callImagen(prompt) {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`;
                const payload = {
                    instances: [{ prompt: prompt }],
                    parameters: { sampleCount: 1 }
                };

                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error(`Imagen Error: ${response.status}`);
                const data = await response.json();
                
                // Extract base64
                const base64 = data.predictions?.[0]?.bytesBase64Encoded;
                if (!base64) throw new Error("No image data returned");
                return `data:image/png;base64,${base64}`;
            }

            generateBtn.addEventListener('click', async () => {
                const prompt = imagePromptInput.value.trim();
                if (!prompt) return;

                // UI Loading State
                imagePlaceholderText.classList.add('hidden');
                generatedImage.classList.add('hidden');
                imageLoader.classList.remove('hidden');
                imageError.classList.add('hidden');
                generateBtn.disabled = true;
                generateBtn.classList.add('opacity-50');

                // Exponential backoff logic
                const delays = [1000, 2000, 4000, 8000, 16000];
                let success = false;

                for (let i = 0; i < delays.length; i++) {
                    try {
                        const imageUrl = await callImagen(prompt);
                        generatedImage.src = imageUrl;
                        generatedImage.classList.remove('hidden');
                        success = true;
                        break;
                    } catch (err) {
                        if (i === delays.length - 1) {
                            imageError.textContent = "Failed to generate image. Please try again.";
                            imageError.classList.remove('hidden');
                            imagePlaceholderText.classList.remove('hidden');
                        } else {
                            await new Promise(r => setTimeout(r, delays[i]));
                        }
                    }
                }

                imageLoader.classList.add('hidden');
                generateBtn.disabled = false;
                generateBtn.classList.remove('opacity-50');
            });
        });
    </script>
</body>
</html>